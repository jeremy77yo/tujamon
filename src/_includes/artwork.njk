---
layout: page.njk
pageClass: artwork-page
---

{% set artCode = "tj-" + page.fileSlug %}
{% set allArt = collections.artworks %}
{% set currentIndex = -1 %}
{% for art in allArt %}
  {% if art.url == page.url %}
    {% set currentIndex = loop.index0 %}
  {% endif %}
{% endfor %}
{% if currentIndex > 0 %}
  {% set prevUrl = allArt[currentIndex - 1].url %}
{% endif %}
{% if currentIndex < allArt.length - 1 %}
  {% set nextUrl = allArt[currentIndex + 1].url %}
{% endif %}

<figure class="artwork-frame">
  <a class="artwork-zoom"
     href="{{ image }}"
     target="_blank"
     rel="noreferrer"
     aria-label="Open full size image">
    <img
      class="artwork-img"
      src="{{ image }}"
      alt="{{ title or page.fileSlug }}"
      loading="eager"
    />
  </a>
</figure>

<div class="buy">
  <a class="buy-btn" href="/buy/?art={{ artCode }}">
    buy
  </a>
</div>

<script>
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      window.location.href = '/';
    }
    {% if prevUrl %}
    if (e.key === 'ArrowLeft') {
      window.location.href = '{{ prevUrl }}';
    }
    {% endif %}
    {% if nextUrl %}
    if (e.key === 'ArrowRight') {
      window.location.href = '{{ nextUrl }}';
    }
    {% endif %}
  });
</script>
